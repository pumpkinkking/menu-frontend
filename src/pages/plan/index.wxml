<view class="plan-page">
  <!-- 顶部导航栏 -->
  <view class="navbar">
    <view class="nav-title">自定义计划</view>
    <view class="nav-actions">
      <image class="nav-icon" src="/static/icons/more.svg"></image>
      <image class="nav-icon" src="/static/icons/calendar-view.svg"></image>
    </view>
  </view>

  <!-- 日历组件 -->
  <view class="calendar-container">
    <view class="calendar-header">
      <image class="calendar-arrow" src="/static/icons/left-arrow.svg" bindtap="prevMonth"></image>
      <view class="calendar-title">{{currentYear}}年 {{currentMonth}}月</view>
      <image class="calendar-arrow" src="/static/icons/right-arrow.svg" bindtap="nextMonth"></image>
    </view>
    <view class="calendar-weekdays">
      <view class="weekday">周一</view>
      <view class="weekday">周二</view>
      <view class="weekday">周三</view>
      <view class="weekday">周四</view>
      <view class="weekday">周五</view>
      <view class="weekday">周六</view>
      <view class="weekday">周日</view>
    </view>
    <view class="calendar-days">
      <view wx:for="{{days}}" wx:key="index" class="calendar-day" wx:class="{{day.date === currentDay ? 'current-day' : ''}} {{day.month !== currentMonth ? 'other-month' : ''}}">
        {{day.date}}
      </view>
    </view>
  </view>

  <!-- 三餐安排区域 -->
  <scroll-view class="meal-scroll" scroll-y>
    <view class="meal-section">
      <view class="meal-header">
        <image class="meal-icon" src="/static/icons/breakfast.svg"></image>
        <text class="meal-title">早餐</text>
        <button class="add-btn" bindtap="addRecipe" data-meal-type="breakfast">添加菜谱</button>
      </view>
      <view class="meal-content">
        <image class="empty-img" src="/static/images/empty-meal.svg"></image>
        <text class="empty-text">暂无安排~</text>
      </view>
    </view>

    <view class="meal-section">
      <view class="meal-header">
        <image class="meal-icon" src="/static/icons/lunch.svg"></image>
        <text class="meal-title">午餐</text>
        <button class="add-btn" bindtap="addRecipe" data-meal-type="lunch">添加菜谱</button>
      </view>
      <view class="meal-content">
        <image class="empty-img" src="/static/images/empty-meal.svg"></image>
        <text class="empty-text">暂无安排~</text>
      </view>
    </view>

    <view class="meal-section">
      <view class="meal-header">
        <image class="meal-icon" src="/static/icons/dinner.svg"></image>
        <text class="meal-title">晚餐</text>
        <button class="add-btn" bindtap="addRecipe" data-meal-type="dinner">添加菜谱</button>
      </view>
      <view class="meal-content">
        <image class="empty-img" src="/static/images/empty-meal.svg"></image>
        <text class="empty-text">暂无安排~</text>
      </view>
    </view>
  </scroll-view>
</view>