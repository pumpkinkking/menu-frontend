{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8090","description":"Generated server url"}],"paths":{"/api/plans/{id}":{"put":{"tags":["plan-controller"],"operationId":"updatePlan","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Plan"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}},"delete":{"tags":["plan-controller"],"operationId":"deletePlan","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/api/user/wechatLogin":{"post":{"tags":["user-controller"],"operationId":"wechatLogin","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginVO"}}}}}}},"/api/user/updateUsername":{"post":{"tags":["user-controller"],"operationId":"updateUsername","parameters":[{"name":"userId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"username","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"boolean"}}}}}}},"/api/user/phoneLogin":{"post":{"tags":["user-controller"],"operationId":"phoneLogin","parameters":[{"name":"encryptedData","in":"query","required":true,"schema":{"type":"string"}},{"name":"iv","in":"query","required":true,"schema":{"type":"string"}},{"name":"userId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginVO"}}}}}}},"/api/user/avatar/initialize":{"post":{"tags":["user-controller"],"operationId":"initializeAvatarUpload","parameters":[{"name":"userId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"fileName","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/user/avatar/complete":{"post":{"tags":["user-controller"],"operationId":"completeAvatarUpload","parameters":[{"name":"uploadId","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/user/avatar/chunk":{"post":{"tags":["user-controller"],"operationId":"uploadAvatarChunk","parameters":[{"name":"uploadId","in":"query","required":true,"schema":{"type":"string"}},{"name":"chunkNumber","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"required":["chunkFile"],"type":"object","properties":{"chunkFile":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"OK"}}}},"/api/sms/verifyCode":{"post":{"tags":["sms-controller"],"operationId":"verifyCode","parameters":[{"name":"phone","in":"query","required":true,"schema":{"type":"string"}},{"name":"code","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"boolean"}}}}}}},"/api/sms/sendCode":{"post":{"tags":["sms-controller"],"operationId":"sendCode","parameters":[{"name":"phone","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/api/plans":{"get":{"tags":["plan-controller"],"operationId":"listPlans","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}},"post":{"tags":["plan-controller"],"operationId":"createPlan","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Plan"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/api/pay/notify":{"post":{"tags":["pay-controller"],"operationId":"handlePayNotify","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/pay/createOrder":{"post":{"tags":["pay-controller"],"operationId":"createOrder","parameters":[{"name":"orderNo","in":"query","required":true,"schema":{"type":"string"}},{"name":"totalFee","in":"query","required":true,"schema":{"type":"integer","format":"int32"}},{"name":"openid","in":"query","required":true,"schema":{"type":"string"}},{"name":"body","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/WxPayMpOrderResult"}}}}}}},"/api/orders":{"get":{"tags":["订单管理"],"summary":"获取订单列表","operationId":"getOrders","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultListOrderVO"}}}}}},"post":{"tags":["订单管理"],"summary":"创建订单","operationId":"createOrder_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultLong"}}}}}}},"/api/menus":{"post":{"tags":["餐单管理"],"summary":"上传餐单","operationId":"uploadMenu","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultLong"}}}}}}},"/api/menus/{id}/share":{"post":{"tags":["餐单管理"],"summary":"分享餐单","operationId":"shareMenu","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"channel","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultBoolean"}}}}}}},"/api/menus/{id}/collect":{"post":{"tags":["餐单管理"],"summary":"收藏餐单","operationId":"collectMenu","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultBoolean"}}}}}},"delete":{"tags":["餐单管理"],"summary":"取消收藏餐单","operationId":"cancelCollectMenu","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultBoolean"}}}}}}},"/api/menus/image/initialize":{"post":{"tags":["餐单管理"],"summary":"初始化菜单图片上传","operationId":"initializeMenuImageUpload","parameters":[{"name":"userId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"fileName","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/api/menus/image/complete":{"post":{"tags":["餐单管理"],"summary":"完成菜单图片上传","operationId":"completeMenuImageUpload","parameters":[{"name":"uploadId","in":"query","required":true,"schema":{"type":"string"}},{"name":"thumbnailWidth","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":200}},{"name":"thumbnailHeight","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":200}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultMapStringString"}}}}}}},"/api/menus/image/chunk":{"post":{"tags":["餐单管理"],"summary":"上传菜单图片分片","operationId":"uploadMenuImageChunk","parameters":[{"name":"uploadId","in":"query","required":true,"schema":{"type":"string"}},{"name":"chunkNumber","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"required":["chunkFile"],"type":"object","properties":{"chunkFile":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultVoid"}}}}}}},"/api/menus/batch":{"post":{"tags":["餐单管理"],"summary":"批量上传餐单","operationId":"batchUploadMenus","requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuDTO"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultListLong"}}}}}}},"/api/ingredients":{"get":{"tags":["食材管理"],"summary":"获取食材列表","operationId":"getIngredients","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultListIngredientVO"}}}}}},"post":{"tags":["食材管理"],"summary":"添加食材","operationId":"addIngredient","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngredientDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultLong"}}}}}}},"/api/basket":{"get":{"tags":["菜篮子管理"],"summary":"获取菜篮子列表","operationId":"getBasketItems","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultListBasketVO"}}}}}},"post":{"tags":["菜篮子管理"],"summary":"添加食材到菜篮子","operationId":"addToBasket","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BasketDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultLong"}}}}}}},"/api/orders/{id}":{"get":{"tags":["订单管理"],"summary":"获取订单详情","operationId":"getOrderDetail","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultOrderVO"}}}}}}},"/api/menus/{id}":{"get":{"tags":["餐单管理"],"summary":"获取餐单详情","operationId":"getMenuDetail","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultMenuDetailVO"}}}}}}},"/api/menus/search":{"get":{"tags":["餐单管理"],"summary":"搜索餐单","operationId":"searchMenus","parameters":[{"name":"keyword","in":"query","required":true,"schema":{"type":"string"}},{"name":"pageNum","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}},{"name":"pageSize","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultIPageMenuVO"}}}}}}},"/api/menus/newest":{"get":{"tags":["餐单管理"],"summary":"按最新上传浏览餐单","operationId":"getNewestMenus","parameters":[{"name":"pageNum","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}},{"name":"pageSize","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultIPageMenuVO"}}}}}}},"/api/menus/my":{"get":{"tags":["餐单管理"],"summary":"获取用户创建的餐单","operationId":"getUserCreatedMenus","parameters":[{"name":"pageNum","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}},{"name":"pageSize","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultIPageMenuVO"}}}}}}},"/api/menus/hot":{"get":{"tags":["餐单管理"],"summary":"按热门程度浏览餐单","operationId":"getHotMenus","parameters":[{"name":"pageNum","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}},{"name":"pageSize","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultIPageMenuVO"}}}}}}},"/api/menus/collections":{"get":{"tags":["餐单管理"],"summary":"获取用户收藏的餐单","operationId":"getUserCollectedMenus","parameters":[{"name":"pageNum","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}},{"name":"pageSize","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultIPageMenuVO"}}}}}}},"/api/menus/category/{categoryId}":{"get":{"tags":["餐单管理"],"summary":"按分类浏览餐单","operationId":"getMenusByCategory","parameters":[{"name":"categoryId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"pageNum","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}},{"name":"pageSize","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultIPageMenuVO"}}}}}}},"/api/ingredients/{id}":{"delete":{"tags":["食材管理"],"summary":"删除食材","operationId":"deleteIngredient","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultBoolean"}}}}}}},"/api/basket/{ingredientId}":{"delete":{"tags":["菜篮子管理"],"summary":"从菜篮子移除食材","operationId":"removeFromBasket","parameters":[{"name":"ingredientId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultBoolean"}}}}}}}},"components":{"schemas":{"Plan":{"required":["date","meals","title"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"date":{"type":"string","format":"date-time"},"meals":{"type":"array","items":{"type":"string"}},"createTime":{"type":"string","format":"date-time"},"updateTime":{"type":"string","format":"date-time"}}},"Result":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"object"}}},"LoginVO":{"type":"object","properties":{"token":{"type":"string"},"userId":{"type":"integer","format":"int64"}}},"ResultString":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"string"}}},"WxPayMpOrderResult":{"type":"object","properties":{"appId":{"type":"string"},"timeStamp":{"type":"string"},"nonceStr":{"type":"string"},"packageValue":{"type":"string"},"signType":{"type":"string"},"paySign":{"type":"string"}}},"OrderDTO":{"required":["date","dishes","totalPrice"],"type":"object","properties":{"date":{"type":"string","description":"订单日期"},"dishes":{"type":"array","description":"菜品列表","items":{"$ref":"#/components/schemas/OrderDishDTO"}},"totalPrice":{"type":"number","description":"订单总价"}},"description":"订单数据传输对象"},"OrderDishDTO":{"required":["dishId","quantity"],"type":"object","properties":{"dishId":{"type":"integer","description":"菜品ID","format":"int64"},"quantity":{"type":"integer","description":"菜品数量","format":"int32"}},"description":"订单项数据传输对象"},"ResultLong":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"integer","format":"int64"}}},"MenuDTO":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"coverImageUrl":{"type":"string"},"thumbnailUrl":{"type":"string"},"categoryId":{"type":"integer","format":"int64"},"ingredients":{"type":"array","items":{"$ref":"#/components/schemas/MenuIngredient"}},"steps":{"type":"array","items":{"$ref":"#/components/schemas/MenuStep"}}}},"MenuIngredient":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"menuId":{"type":"integer","format":"int64"},"name":{"type":"string"},"quantity":{"type":"string"},"unit":{"type":"string"},"sortOrder":{"type":"integer","format":"int32"}}},"MenuStep":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"menuId":{"type":"integer","format":"int64"},"content":{"type":"string"},"imageUrl":{"type":"string"},"sortOrder":{"type":"integer","format":"int32"}}},"ResultBoolean":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"boolean"}}},"ResultMapStringString":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"object","additionalProperties":{"type":"string"}}}},"ResultVoid":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"object"}}},"ResultListLong":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"array","items":{"type":"integer","format":"int64"}}}},"IngredientDTO":{"required":["name","quantity","unit"],"type":"object","properties":{"name":{"type":"string","description":"食材名称"},"quantity":{"type":"integer","description":"食材数量","format":"int32"},"unit":{"type":"string","description":"计量单位"},"location":{"type":"string","description":"存储位置"},"freshness":{"type":"string","description":"新鲜度"}},"description":"食材数据传输对象"},"BasketDTO":{"required":["ingredientId","quantity","unit"],"type":"object","properties":{"ingredientId":{"type":"integer","description":"食材ID","format":"int64"},"quantity":{"type":"integer","description":"食材数量","format":"int32"},"unit":{"type":"string","description":"计量单位"}},"description":"菜篮子数据传输对象"},"OrderItemVO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"orderId":{"type":"integer","format":"int64"},"dishId":{"type":"integer","format":"int64"},"dishName":{"type":"string"},"dishImage":{"type":"string"},"price":{"type":"number"},"quantity":{"type":"integer","format":"int32"},"subtotal":{"type":"number"}}},"OrderVO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"orderNo":{"type":"string"},"userId":{"type":"integer","format":"int64"},"orderDate":{"type":"string","format":"date-time"},"totalPrice":{"type":"number"},"status":{"type":"integer","format":"int32"},"orderItems":{"type":"array","items":{"$ref":"#/components/schemas/OrderItemVO"}}}},"ResultListOrderVO":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/OrderVO"}}}},"ResultOrderVO":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/OrderVO"}}},"MenuDetailVO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"description":{"type":"string"},"coverImageUrl":{"type":"string"},"categoryId":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"viewCount":{"type":"integer","format":"int32"},"collectCount":{"type":"integer","format":"int32"},"shareCount":{"type":"integer","format":"int32"},"createTime":{"type":"string","format":"date-time"},"ingredients":{"type":"array","items":{"$ref":"#/components/schemas/MenuIngredient"}},"steps":{"type":"array","items":{"$ref":"#/components/schemas/MenuStep"}},"collected":{"type":"boolean"}}},"ResultMenuDetailVO":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/MenuDetailVO"}}},"IPageMenuVO":{"type":"object","properties":{"size":{"type":"integer","format":"int64"},"records":{"type":"array","items":{"$ref":"#/components/schemas/MenuVO"}},"total":{"type":"integer","format":"int64"},"current":{"type":"integer","format":"int64"},"pages":{"type":"integer","format":"int64"}}},"MenuVO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"description":{"type":"string"},"coverImageUrl":{"type":"string"},"categoryId":{"type":"integer","format":"int64"},"viewCount":{"type":"integer","format":"int32"},"collectCount":{"type":"integer","format":"int32"},"shareCount":{"type":"integer","format":"int32"},"createTime":{"type":"string","format":"date-time"}}},"ResultIPageMenuVO":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/IPageMenuVO"}}},"IngredientVO":{"type":"object","properties":{"id":{"type":"integer","description":"食材ID","format":"int64"},"name":{"type":"string","description":"食材名称"},"quantity":{"type":"integer","description":"食材数量","format":"int32"},"unit":{"type":"string","description":"计量单位"},"location":{"type":"string","description":"存储位置"},"freshness":{"type":"string","description":"新鲜度"},"createTime":{"type":"string","description":"创建时间","format":"date-time"}},"description":"食材视图对象"},"ResultListIngredientVO":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/IngredientVO"}}}},"BasketVO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"ingredientId":{"type":"integer","format":"int64"},"ingredientName":{"type":"string"},"quantity":{"type":"number"},"unit":{"type":"string"},"storageLocation":{"type":"string"},"freshness":{"type":"integer","format":"int32"},"createTime":{"type":"string","format":"date-time"}}},"ResultListBasketVO":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/BasketVO"}}}}}}}